#!/bin/sh
prevdir=`pwd`
ocamltterhome=`dirname $0`
cd $ocamltterhome

with_pkgs=""
for pkg in cryptokit tiny_json tiny_json_conv ocaml_conv meta_conv
do
  with_pkgs="$with_pkgs -I `ocamlfind query $pkg`"
done

incl="$with_pkgs -I +threads -I base -I twitter"
if [ $# -ne 1 ]; then
    initfile='.ocamlinit'
else
    initfile=$1
fi
# echo ./ocamltter_top $incl -init $initfile
./ocamltter_top $incl -init $initfile
cd $prevdir
